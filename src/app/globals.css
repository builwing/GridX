@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  body {
    @apply bg-gradient-to-br from-purple-50 via-blue-50 to-green-50 min-h-screen;
    font-feature-settings: "rlig" 1, "calt" 1;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  }
  
  html {
    scroll-behavior: smooth;
  }
  
  * {
    -webkit-tap-highlight-color: transparent;
  }
}

@layer components {
  .sudoku-cell {
    @apply w-full h-full bg-white text-center text-xl sm:text-2xl font-bold
           transition-all duration-200 ease-in-out
           focus:outline-none focus:ring-2 focus:ring-blue-400
           hover:bg-blue-50 select-none cursor-pointer;
    /* シンプルな格子線スタイル - 隙間なし */
    border: 0.5px solid #9ca3af;
    border-radius: 0;
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }
  
  .sudoku-cell.selected {
    @apply bg-blue-100 ring-2 ring-blue-400;
    /* 選択されたセルでも境界線を維持 */
    z-index: 10;
    position: relative;
  }
  
  .sudoku-cell.prefilled {
    @apply bg-gray-100 text-black cursor-default font-black;
  }
  
  .sudoku-cell.error {
    @apply bg-red-50 text-red-700 ring-2 ring-red-300
           border-red-300 animate-shake;
  }
  
  /* エラー時のアニメーション */
  @keyframes error-shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-2px); }
    75% { transform: translateX(2px); }
  }
  
  .sudoku-cell.correct {
    @apply bg-green-50 text-green-700 ring-2 ring-green-300
           border-green-300 animate-bounce-gentle;
  }
  
  .sudoku-cell.hint {
    @apply bg-yellow-50 text-amber-700 ring-2 ring-yellow-300
           border-yellow-300 animate-pulse-gentle;
  }
  
  .sudoku-grid {
    @apply max-w-xl mx-auto;
    /* シンプルな9×9グリッド - 完全に隙間なし */
    display: grid;
    grid-template-columns: repeat(9, 1fr);
    grid-template-rows: repeat(9, 1fr);
    aspect-ratio: 1;
    padding: 0;
    gap: 0;
    /* 外枠の境界線（角丸なし） */
    border: 2px solid #374151;
    border-radius: 0;
    background-color: #ffffff;
    box-sizing: border-box;
    /* 境界線を内側に含める */
    border-collapse: collapse;
  }
  
  /* 3×3ブロック境界線のみ太くする */
  /* 3列目と6列目の右境界を太くする */
  .sudoku-cell:nth-child(9n+3),
  .sudoku-cell:nth-child(9n+6) {
    border-right-width: 2px;
    border-right-color: #374151;
  }
  
  /* 27番目と54番目の後の行（3行目と6行目の最後）に太い下境界を追加 */
  .sudoku-cell:nth-child(n+19):nth-child(-n+27),
  .sudoku-cell:nth-child(n+46):nth-child(-n+54) {
    border-bottom-width: 2px;
    border-bottom-color: #374151;
  }
  
  
  /* モバイル対応 */
  @media (max-width: 640px) {
    .sudoku-grid {
      @apply max-w-sm;
      padding: 0; /* モバイルでもパディングなし */
    }
    
    .sudoku-cell {
      @apply w-full h-full text-lg;
      /* モバイルでも隙間なし */
      border: 0.5px solid #9ca3af;
      margin: 0;
      padding: 0;
    }
    
    /* モバイル用の3×3ブロック境界線 */
    .sudoku-cell:nth-child(9n+3),
    .sudoku-cell:nth-child(9n+6) {
      border-right-width: 2px;
      border-right-color: #374151;
    }
    
    .sudoku-cell:nth-child(n+19):nth-child(-n+27),
    .sudoku-cell:nth-child(n+46):nth-child(-n+54) {
      border-bottom-width: 2px;
      border-bottom-color: #374151;
    }
    
    .number-button {
      @apply w-10 h-10 text-lg;
    }
  }
  
  /* タブレット対応 */
  @media (min-width: 641px) and (max-width: 1024px) {
    .sudoku-grid {
      @apply max-w-md;
      padding: 0; /* タブレットでもパディングなし */
    }
    
    .sudoku-cell {
      /* タブレット用の境界線調整 */
      border: 0.5px solid #9ca3af;
      margin: 0;
      padding: 0;
    }
    
    /* タブレット用の3×3ブロック境界線 */
    .sudoku-cell:nth-child(9n+3),
    .sudoku-cell:nth-child(9n+6) {
      border-right-width: 2px;
      border-right-color: #374151;
    }
    
    .sudoku-cell:nth-child(n+19):nth-child(-n+27),
    .sudoku-cell:nth-child(n+46):nth-child(-n+54) {
      border-bottom-width: 2px;
      border-bottom-color: #374151;
    }
  }
  
  .number-button {
    @apply w-12 h-12 sm:w-14 sm:h-14 bg-gradient-to-br from-blue-400 to-blue-600 text-white
           text-xl sm:text-2xl font-bold rounded-xl shadow-lg transform transition-all duration-150
           hover:scale-110 hover:shadow-xl active:scale-95
           focus:outline-none focus:ring-2 focus:ring-blue-300 focus:ring-offset-2;
  }
  
  .number-button:hover {
    @apply from-blue-500 to-blue-700;
  }
  
  .control-button {
    @apply px-6 py-3 sm:px-8 sm:py-4 bg-gradient-to-r from-purple-500 to-pink-500 text-white
           text-base sm:text-lg font-bold rounded-xl shadow-lg transform transition-all duration-200
           hover:scale-105 hover:shadow-xl active:scale-95
           focus:outline-none focus:ring-2 focus:ring-purple-300 focus:ring-offset-2
           disabled:from-gray-300 disabled:to-gray-400 disabled:cursor-not-allowed disabled:scale-100;
  }
  
  .control-button-secondary {
    @apply px-6 py-3 sm:px-8 sm:py-4 bg-gradient-to-r from-gray-200 to-gray-300 text-gray-800
           text-base sm:text-lg font-bold rounded-xl shadow-lg transform transition-all duration-200
           hover:scale-105 hover:shadow-xl hover:from-gray-300 hover:to-gray-400 active:scale-95
           focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2
           disabled:from-gray-100 disabled:to-gray-200 disabled:cursor-not-allowed disabled:scale-100;
  }
  
  .game-button {
    @apply px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-xl font-bold
           text-lg shadow-lg transform transition-all duration-200
           hover:scale-105 hover:shadow-xl hover:from-blue-600 hover:to-purple-700 active:scale-95
           disabled:from-gray-300 disabled:to-gray-400 disabled:cursor-not-allowed disabled:scale-100
           focus:outline-none focus:ring-2 focus:ring-blue-300 focus:ring-offset-2;
  }
  
  .game-button-secondary {
    @apply px-6 py-3 bg-gradient-to-r from-gray-200 to-gray-300 text-gray-800 rounded-xl font-bold
           text-lg shadow-lg transform transition-all duration-200 border-2 border-gray-400
           hover:scale-105 hover:shadow-xl hover:from-gray-300 hover:to-gray-400 active:scale-95
           disabled:from-gray-100 disabled:to-gray-200 disabled:text-gray-400 disabled:cursor-not-allowed disabled:scale-100
           focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2;
  }
  
  .difficulty-button {
    @apply px-4 py-2 text-lg font-bold rounded-xl transition-all duration-200 transform
           border-2 shadow-md hover:scale-105 hover:shadow-lg active:scale-95
           focus:outline-none focus:ring-2 focus:ring-offset-2;
  }
  
  .difficulty-button.active {
    @apply bg-gradient-to-r from-green-400 to-blue-500 text-white border-green-400
           ring-2 ring-green-300 scale-105 shadow-lg;
  }
  
  .difficulty-button.inactive {
    @apply bg-white text-gray-700 border-gray-300 hover:bg-gray-50 hover:border-gray-400
           focus:ring-gray-400;
  }
  
  .stat-card {
    @apply bg-gradient-to-br from-white to-gray-50 rounded-2xl p-4 shadow-lg border-2 border-gray-200
           transform transition-all duration-200 hover:scale-105 hover:shadow-xl;
  }
  
  .success-celebration {
    @apply bg-gradient-to-r from-yellow-200 via-green-200 to-blue-200 border-4
           border-yellow-400 rounded-3xl p-6
           shadow-2xl animate-celebration;
  }
}

@layer utilities {
  .animate-success {
    animation: pulse-success 0.5s ease-in-out;
  }
  
  .animate-error {
    animation: bounce-subtle 0.3s ease-in-out;
  }
  
  .animate-shake {
    animation: shake 0.5s ease-in-out;
  }
  
  .animate-bounce-gentle {
    animation: bounce-gentle 0.6s ease-in-out;
  }
  
  .animate-pulse-gentle {
    animation: pulse-gentle 1.5s ease-in-out infinite;
  }
  
  .animate-celebration {
    animation: celebration 2s ease-in-out;
  }
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-3px); }
  20%, 40%, 60%, 80% { transform: translateX(3px); }
}

@keyframes bounce-gentle {
  0%, 100% { transform: translateY(0) scale(1); }
  50% { transform: translateY(-10px) scale(1.1); }
}

@keyframes pulse-gentle {
  0%, 100% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.05); opacity: 0.8; }
}

@keyframes celebration {
  0% { transform: scale(1) rotate(0deg); }
  10% { transform: scale(1.1) rotate(2deg); }
  20% { transform: scale(1.05) rotate(-2deg); }
  30% { transform: scale(1.1) rotate(2deg); }
  40% { transform: scale(1.05) rotate(-2deg); }
  50% { transform: scale(1.1) rotate(0deg); }
  100% { transform: scale(1) rotate(0deg); }
}

@keyframes pulse-success {
  0%, 100% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.2); opacity: 0.7; }
}

@keyframes bounce-subtle {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-5px); }
}